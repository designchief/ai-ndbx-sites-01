.animated {
  animation-duration: .3s;
  animation-fill-mode: both;
}

.delayed {
  animation-delay: .2s;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.fadeIn {
  animation-name: fadeIn;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translate3d(0, -100%, 0);
  }

  to {
    opacity: 1;
    transform: none;
  }
}

.c-tabs {
  padding-top: map-get($sizes, 3m);
  padding-bottom: map-get($sizes, 3m);
  @include media-breakpoint-response(mobile) {
    padding-top: map-get($sizes, 5xs);
    padding-bottom: map-get($sizes, 5xs);
  }
}

// Vertical Tabs 
.c-tabs--vertical {
  .c-tabs__nav {
    flex-direction: column;
    flex: 1;
    justify-content: flex-start;
    align-items: stretch;
  }

  .c-tabs__content {
    flex: 3;
    border-bottom: none;

    .c-tabs__content-item {
      margin-top: map-get($sizes, 5xs);
      
      &:after,
      &:before {
        content: none;
      }
    }
    

    // atom(x): c-heading
    .c-heading__tabs {
      margin: map-get($sizes, 5xs) map-get($sizes, 5xs) map-get($sizes, s) map-get($sizes, 5xs);
      font-size: map-get($font-sizes, 2m);
      font-weight: map-get($font-weight, light);
      letter-spacing: map-get($letter-spacings, s);
      line-height: map-get($line-heights, 2m);
    }
  }

  .c-tabs__nav-item.active {
    .c-icon--arrow-right {
      height: map-get($sizes, m);
      width: map-get($sizes, m);
      font-size: map-get($font-sizes, s);
      display: block;
      align-self: flex-start;
      margin-left: map-get($sizes, 2xs);
    }

    .c-icon--arrow-right::before {
      height: map-get($sizes, m);
      width: map-get($sizes, m);
      display: block;
      align-self: flex-start;
    }
    .c-tabs__label:after {
      content: none;
    }
    .c-tabs__label {
      padding-right: map-get($sizes, 2xs);
      @include media-breakpoint-response(mobile) {
        padding-left: map-get($sizes, 5xs);
        padding-right: map-get($sizes, 5xs);
      }
    }
  }

  .c-tabs__label {
    flex-grow: 1;
    margin: map-get($sizes, 5xs);
    padding: map-get($sizes, xs) map-get($sizes, 3m) (map-get($sizes, xs) - map-get($borders, xs)) map-get($sizes, 2xs);
    border-bottom: map-get($borders, xs) solid map-get($color-grey-tones, grey-tone-6);

    @include media-breakpoint-response(mobile) {
      margin: map-get($sizes, 5xs) auto (- map-get($borders, xs));
      padding: (map-get($sizes, s) - map-get($borders, xs)) map-get($sizes, 5xs) map-get($sizes, 5xs);
      border-bottom: none;
    }

    .c-tabs__label-container {
      text-align: left;
      word-break: break-word;
      overflow-wrap: break-word;
      max-width: none;
      hyphens: none;
    }
  }  
}

.c-tabs__input, .c-tabs__input--vertical {
  opacity: 0;
  position: absolute;
}

.c-tabs__icon {
  display: none;
}

// Horizontal Tabs
.c-tabs__label {
  cursor: pointer;
  outline: 0;
  position: relative;
  align-items: center;
  color: map-get($color-primary-action, primary-action-dark);
  display: flex;
  font-size: map-get($font-sizes, 2xs);
  font-weight: map-get($font-weight, regular);
  line-height: map-get($line-heights, 2xs);
  letter-spacing: map-get($letter-spacings, 2m);
  justify-content: space-between;
  transition: font-weight .3s ease;
  padding: map-get($sizes, 5xs) map-get($sizes, s) (map-get($sizes, 2xs) - map-get($sizes, 4xs));
  margin: map-get($sizes, 5xs);
  border-bottom: map-get($borders, m) solid map-get($color-primary-action, primary-action-dark);
  
  @include media-breakpoint-response(mobile) {
    font-size: map-get($font-sizes, 3xs);
    letter-spacing: map-get($letter-spacings, 2xs);
    padding: (map-get($sizes, s) - map-get($borders, xs)) map-get($sizes, 5xs) map-get($sizes, 5xs);
    margin: map-get($sizes, 5xs) auto (- map-get($borders, xs));
    height: auto;
    border-top: map-get($borders, xs) solid map-get($color-grey-tones, grey-tone-6);
    border-bottom: none;
 
    .c-tabs__nav-item + .c-tabs__nav-item & {
      padding-top: map-get($sizes, s); 
      border-top: none;
    }
  
    .c-tabs__nav-item.active + .c-tabs__nav-item & {
      padding-top: map-get($sizes, s); 
      border-top: none;
    }
    
  }

  .c-tabs__nav-item.active & {
    font-weight: map-get($font-weight, bold);
    transition: font-weight .3s ease;
  }

  .c-tabs__label-container {
    text-align: center;
    max-width: map-get($sizes, 5xl) + map-get($sizes, 4xl);
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: none;
  
    @include media-breakpoint-response(mobile) {
      text-align: left;
      max-width: none;
    }
  }

  .c-tabs__first-line, .c-tabs__second-line {
    display: block;
    margin: map-get($sizes, 5xs);

    @include media-breakpoint-response(mobile) {
      display: inline;
    }
  }
}



.c-tabs__nav {
  list-style: none;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  margin-top: map-get($sizes, 5xs);
  margin-bottom: map-get($sizes, 5xs);

  @include media-breakpoint-response(mobile) {
    flex-direction: column;
    margin-left: map-get($sizes, 5xs);
    margin-right: map-get($sizes, 5xs);
  }
}

.c-tabs__nav-item {
  display: flex;
  @include media-breakpoint-response(mobile) {
    overflow: hidden;
    width: 100%;
    display: block;

    .c-tabs__label {
      .c-icon--chevron-up {
        align-self: flex-start;
        margin-left: map-get($sizes, s);
        font-size: map-get($font-sizes, s);
        display: none;
        height: map-get($sizes, m);
      }

      .c-icon--chevron-up::before {
        height: map-get($sizes, m);
        display: block;
      }
      
      .c-icon--chevron-down {
        align-self: flex-start;
        margin-left: map-get($sizes, s);
        font-size: map-get($font-sizes, s);
        display: block;
        height: map-get($sizes, m);
      }

      .c-icon--chevron-down::before {
        height: map-get($sizes, m);
        display: block;
      }
    }
  }

  &:last-child.active {
    @include media-breakpoint-response(mobile) {
      border-bottom: none;
    }
  }

  &.active {
    @include media-breakpoint-response(mobile) {
      height: auto;

      .c-tabs__label {
        .c-icon--chevron-up {
          display: block;
        }

        .c-icon--chevron-up::before {
          height: map-get($sizes, m);
          display: block;
        }

        .c-icon--chevron-down {
          display: none;
        }

        .c-icon--chevron-down::before {
          height: map-get($sizes, m);
          display: block;
        }
      }
    }

    .c-tabs__label:after {
      border-bottom: map-get($borders, m) solid map-get($color-primary-action, primary-action-dark);
      bottom: 0;
      content: '';
      display: block;
      height: map-get($sizes, 4xs);
      left: 0;
      position: absolute;
      transition: opacity .3s ease-in-out;
      width: 100%;


      @include media-breakpoint-response(mobile) {
        content: none;
      }
    }
  }
}

.c-tabs__content {
  overflow: hidden;
  min-height: map-get($sizes, 5xl);
  transition: max-height .2s ease;
}

.c-tabs__content-item {
  display: none;
  opacity: 0;
  margin-top: map-get($sizes, m);
  
  @include media-breakpoint-response(mobile) {
    margin-top: map-get($sizes, s);
    border-bottom: map-get($borders, xs) solid map-get($color-grey-tones, grey-tone-6);
  }

  &:after,
  &:before {
    content: '';
    display: block;
    height: map-get($sizes, 5xs);
  }

  &:after {
    content: '';
    display: block;
    height: map-get($sizes, m) - map-get($borders, xs);
  }

  // atom(x): c-heading
  .c-heading__tabs {
    margin-bottom: map-get($sizes, s);

    @include media-breakpoint-response(mobile) {
      margin-bottom: map-get($sizes, s);
    }
  }

  .c-tabs__nav & {
    transition: max-height .6s ease;
    display: block;
  }

  .c-tabs__content & {
    transition: opacity .3s .3s ease-in-out;

    &.active {
      display: block;
      opacity: 1;
    }
  }

  .c-copy {
    margin-bottom: map-get($sizes, 5xs);
    hyphens: none;
  }

  .c-tabs__nav-item &,
  .c-tabs__nav-item.active & {
    opacity: 1;
  }
}


// Negative tabs
.c-tabs--negative {
  color: map-get($color-basic, primary-white);
  
  @include media-breakpoint-response(mobile) {
    padding-top: map-get($sizes, 5xs);
    padding-bottom: map-get($sizes, 5xs);
  }

  .c-tabs__label {
    color: map-get($color-basic, primary-white);
    border-bottom-color: map-get($color-basic, primary-white);
  }

  .c-tabs__nav-item.active .c-tabs__label:after {
    border-bottom-color: map-get($color-basic, primary-white);
  }
}

.c-tabs__input:focus + .c-tabs__label {
  [data-whatinput="keyboard"] & {
    outline: auto;
  }
}

.c-tabs__content:focus {
  [data-whatinput="mouse"] & {
      outline: none; 
  }
}
